## Web多链接合并试验过程 {#web多链接合并试验过程}

在这部分中，我们以对比两个不同页面布局，获取最优点击率为例，来说明如何使用H5多链接合并模式。

### 1 试验方案 {#1-试验方案}

一个完整的A/B 测试需要根据目前已有的用户数据进行分析判断，推断并建立假设，才能针对性的做出改变和调整，**根据具体需求，构建产品A/B 测试的需求文档，即明确本次试验的几个要素。**

在本次示例中，设计试验版本为全新布局页面URL“http://www.example.com/demo\_version1.html”，对照组为原始页面URL“http://www.example.com/demo.html”，优化指标为按钮的点击次数。

###  2 新建试验 {#new}

进入您的应用界面，此处示例为\[AppAdhocH5页面DEMO\]，选择 **新建试验** 。 ![](http://doc.appadhoc.com/_images/expsetting/create_h5url.png "具体操作")

为了方便寻找，可以将此次测试的内容设置为试验名称。

选择分层：您可以为每一个新创建的试验设置所在层，在同一层的试验流量互斥，可以保证试验互不干扰。如果两个试验在不同层，那么流量可能会重叠，同一个用户可能会同时进入不同层的多个试验。如果选择分层，请自行确保试验内容互不干扰。详情参考[分层流量](http://doc.appadhoc.com/expFlow/stratifiedFlow.html)。

在进行下一步前，请确保已经在试验页面的head部分加入以下代码：

```
……
<
head
>
<
script src='https://sdk.appadhoc.com/ab.plus.js'
>
<
/script
>
<
script
>
      adhoc('init', {
        appKey: 'app_key'//请填写您的APPkey
      })    
<
/script
>
<
/head
>
……
```

###  3 试验版本 {#ver}

点击下一步编辑试验版本，在此填写试验的链接。

请注意，原始版本链接将作为汇总试验链接发布，如图中所示，用户访问链接 www.example.com/demo.html 时，可以按照设定的比例跳转到试验页面的链接。如果直接访问试验版本链接，则无法进入试验。

![](http://doc.appadhoc.com/_images/expsetting/create_urls.png "具体操作")

通常试验链接和访客实际访问链接应该完全一致，并确保链接大小写正确，强烈建议您在浏览器中打开页面后复制浏览器中的链接，然后粘贴到appadhoc后台。

针对以下情况，试验链接填写规则如下：

1、请注意填写的内容是否包含非关键参数。

例如链接 http://example.com/A.html?xxx 其中?xxx可能表示渠道参数等，其实际页面地址为 http://example.com/A.html 。

如果您填写 .../A.html ，则用户访问 .../A.html 或者 .../A.html?xxx 都可以正常进入试验。

如果填写 .../A.html?xxx ，则用户访问.../A.html 时不会进入试验。

2、除上述情况外的其他使用方法，可与客户成功经理联系沟通。

在试验开始前，请在所有试验页面链接中集成SDK代码。复制界面底部代码，粘贴到页面head部分即可。

###  4 优化指标 {#stat}

进入下一步，设置优化指标。您可以在表格中查看并管理已添加的指标 ![](http://doc.appadhoc.com/_images/expsetting/create_stat1.png "使用步骤")

* 点击「跟踪元素点击」，进入可视化编辑器添加优化指标。
* 点击「添加编程指标」，可直接绑定编程优化指标，请注意在代码中集成，并保证指标名称一致。
* 新建优化指标，请注意命名格式，以英文字母开头，可以使用数字和下划线。
* 已创建过的优化指标将会保留，在其他试验中可以直接选择已有优化指标添加，如果是编程指标，代码无需更改。

请注意在多链接试验中，由于每个试验版本对应一个独立页面，您需要在每个页面中都绑定事件。

**（1）追踪元素点击**  
如果只需要知道某个元素的点击次数，可以在编辑器中选中元素，然后选择 **跟踪元素点击** ，关联指定的优化指标即可。 首先进入原始版本，添加您本次试验的优化指标，然后进入试验版本，将上述指标与页面元素关联。

![](http://doc.appadhoc.com/_images/expsetting/h5url_statdialog.png "使用步骤")

**（2）编程指标**  
有时想要统计的数据不是单纯的点击事件，而是“支付成功”这类需要逻辑判断的事件，您需要通过代码来定义事件并上报。选择添加编程指标，为指标命名，之在代码中触发事件的地方集成代码，其中"event\_name"需要替换为您的优化指标名称：

```
adhoc('track', 'event_name', 1)

```

有关优化指标的集成详情参考[集成说明](http://doc.appadhoc.com/sdk/htmlSDK.html#stat)。

有关复合指标的说明请参考[此处](http://doc.appadhoc.com/expFlow/stat.html#comstat)。

###  5 集成调试 {#debug}

确认试验版本和优化指标内容无误，点击完成创建，将会跳转到集成调试界面。在此界面中，点击预览版本，可以直接在浏览器中预览页面的真实效果，此链接转发有效。  
![](http://doc.appadhoc.com/_images/debug/h5visual.png "使用步骤") 操作后，也会获取到对应的指标数据，可以在此界面中预览。调试数据不会影响到真实试验数据。  
![](http://doc.appadhoc.com/_images/debug/data.png "使用步骤")



###  6 调整流量 {#flow}

 点击完成调试，将会跳转到运行控制界面。在此界面中您可以调整试验流量、运行或结束试验。



请为此次试验分配流量，访问到链接的用户将会按照您设定的百分比看到所展现的页面。未参与到试验中的用户将会看到原始页面，并且不会上报数据。  
即使是试验开始运行后，也可以调整流量，所做的调整将会及时生效。  
**请注意100%的流量不代表所有用户都会参与试验，以及在同一层中，某试验占用的流量不能再被分配到其他试验中**。 有关流量的详细说明请参考[流量分配](http://doc.appadhoc.com/expFlow/stratifiedFlow.html)。 ![](http://doc.appadhoc.com/_images/expsetting/flow.png "使用步骤")

### 7 运行试验 {#7-运行试验}

恭喜！现在可以开始运行您的A/BTesting方案了，记得关注试验数据，以便及时调整流量，做出应对策略。有关数据分析请参考[此处](http://doc.appadhoc.com/runAnalysis)。

