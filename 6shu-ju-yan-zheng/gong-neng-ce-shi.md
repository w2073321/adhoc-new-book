## **功能测试**

在集成调试之后，就可以开始试验，进行上线验证。该步骤可以与已有的QA环节结合，从以下三方面进行功能测试：

l  **版本状态测试**

为了验证版本状态显示是否正确，以及通过后台流量切换，是否可以达到版本切换的效果，可以按以下步骤测试：

1. 将原始版本流量切换到100%，打开测试网页或app，此时应该显示原始版本

2. 将试验版本1流量切换到100%，重新打开网页或重新进入app（为了确保能够准确，app需要杀死进程重新进入），此时应该显示试验版本1.

3. 如果还有其他试验版本，按照步骤2执行。

4. 1-3步达到预期效果，则版本测试结束

**注意：**

1. 网页的版本切换是实时生效的，app的版本切换默认是一个小时生效（如需配置生效时间，可在平台“配置”——&gt;“应用配置”选项中设置，这个设置需要第二天才能生效）。但是，在Android测试机装有AdhocTester调试工具，iOS测试机显示调试悬浮标的情况下，app的版本切换是实时生效的。

2. Android与iOS在调试模式下一定要首先退出，否则版本状态测试无法生效

l  **指标上报测试**

为了验证各个版本指标是否可以上报，可以按以下步骤测试：

1. 将原始版本流量切换到100%，打开测试网页或app，点击相应集成指标元素（如按钮），此时原始版本该指标值应该增加设定值（一般是1，按情况不同有区别）

2. 将试验版本1流量切换到100%，重新打开网页或重新进入app（为了确保能够准确，app需要杀死进程重新进入），点击相应集成指标元素（如按钮），此时试验版本1该指标值应该增加设定值（一般是1，按情况不同有区别）

3. 如果还有其他试验版本，按照步骤2执行。

4. 1-3步达到预期效果，则指标测试结束

**注意：**

1. 网页的指标上报是实时生效的，app的指标上报切换默认是一个小时生效，但有例外，在Android测试机装有AdhocTester调试工具，iOS测试机显示调试悬浮标的情况下，app的指标上报是实时生效的。

l  **受众状态测试**

这一步测试是为了验证受众定向试验是否可以针对特定受众进行试验，非受众定向试验该步骤可跳过。

1. 设定满足受众条件的测试用户（如选择特定机型，设定年龄、性别等），将100%流量平均分配到各个版本，打开网页或app，检查用户是否进入试验：观察网页或app的显示版本，然后去后台观察该版本的UV是否有加1，如果UV加1，则代表用户进入了试验。

2. 设定不满足受众条件的测试用户（如选择特定机型，设定年龄、性别等），保持流量分配不变，重新打开网页或重新进入app（为了确保能够准确，app需要杀死进程重新进入），检查用户是否未进入试验：观察网页或app的是否显示默认版本（一般默认版本为原始版本），然后去后台观察原始版本是否UV有加1，没有则代表用户没有进入试验。



